'use strict';var C="application/",j=C+"json",Qe="charset=utf-8",w="Content-Type",R="undefined",K="object",b="string",g="function",ee="AbortError",Se="TimeoutError",Q="GET",Ne="HEAD",te="reject";var Ue=10;function re(e){return e instanceof URLSearchParams}function d(e){return e!==null&&typeof e===K}function J(e){let t=Object.prototype.hasOwnProperty.call(e,"__proto__"),r=Object.prototype.hasOwnProperty.call(e,"constructor"),n=Object.prototype.hasOwnProperty.call(e,"prototype");if(!t&&!r&&!n)return e;let a={...e};return t&&delete a.__proto__,r&&delete a.constructor,n&&delete a.prototype,a}function He(e){let t=Object.keys(e);t.sort();let r={};for(let n=0,a=t.length;n<a;n++){let s=t[n];r[s]=e[s];}return r}function _e(e,t){return t?e.includes("?")?`${e}&${t}`:`${e}?${t}`:e}function Me(e,t){if(!t)return e;if(re(t)){let c=t.toString();return _e(e,c)}let r=[],n=encodeURIComponent,a=(c,i)=>{i=typeof i===g?i():i,i=i===null||i===void 0?"":i,r[r.length]=n(c)+"="+n(i);},s=(c,i,m=0)=>{if(m>=Ue)return r;let l,p,h;if(c)if(Array.isArray(i))for(l=0,p=i.length;l<p;l++)s(c+"["+(typeof i[l]===K&&i[l]?l:"")+"]",i[l],m+1);else if(d(i))for(h in i)s(c+"["+h+"]",i[h],m+1);else a(c,i);else if(Array.isArray(i))for(l=0,p=i.length;l<p;l++)a(i[l].name,i[l].value);else for(h in i)s(h,i[h],m+1);return r},u=s("",t).join("&").replace(/%5B%5D/g,"[]");return _e(e,u)}function Le(e,t){if(!t||e.indexOf(":")===-1)return e;let r=t;return e.replace(/:([a-zA-Z0-9_]+)/g,(n,a)=>{if(Object.prototype.hasOwnProperty.call(r,a)){let s=r[a];if(s!=null)return encodeURIComponent(String(s))}return n})}function ne(e){return e.includes("://")}var P=()=>Date.now(),S=()=>{};function he(e){let t=typeof e;return e==null?false:t===b||t==="number"||t==="boolean"||Array.isArray(e)?true:typeof globalThis!==R&&typeof globalThis.Buffer!==R&&globalThis.Buffer.isBuffer(e)||e instanceof Date||re(e)?false:!!(d(e)&&(Object.getPrototypeOf(e)===Object.prototype||typeof e.toJSON===g))}async function N(e){return new Promise(t=>setTimeout(()=>t(true),e))}function ge(e,t=0){return t>=Ue?e:e&&d(e)&&typeof e.data!==R?ge(e.data,t+1):e}function ae(e){if(!e)return {};let t={};if(e instanceof Headers)e.forEach((r,n)=>{t[n]=r;});else if(d(e))for(let[r,n]of Object.entries(e))t[r.toLowerCase()]=n;return t}function je(){return typeof window!==R&&typeof window.addEventListener===g}function se(e,t){if(typeof DOMException!==R)return new DOMException(e,t);let r=new Error(e);return r.name=t,r}var De=()=>{let e=typeof navigator!==R&&navigator.connection;return e&&["slow-2g","2g","3g"].includes(e.effectiveType)};async function q(e,t,...r){if(e){if(typeof e===g){let n=await e(t,...r);n&&d(t)&&d(n)&&Object.assign(t,n);}else if(Array.isArray(e))for(let n of e){let a=await n(t,...r);a&&d(t)&&d(a)&&Object.assign(t,a);}}}var oe=class extends Error{constructor(r,n,a){super(r);this.request=n;this.response=a;this.name="FetchError",this.status=a?a.status:0,this.statusText=a?a.statusText:"",this.config=n,this.isCancelled=false;}status;statusText;config;isCancelled};var ie=class extends oe{constructor(t,r,n){super(t,r,n),this.name="ResponseError";}};var le=600,z=1e3,pt=le*z,Ee=Array(le).fill(0).map(()=>[]),A=new Map,ue=0,x=null,Ke=([e,t])=>{A.delete(e);try{let r=t();r&&r instanceof Promise&&r.catch(S);}catch{}},I=(e,t,r)=>{if(_(e),r<z||r>pt||r%z!==0){A.set(e,[setTimeout(Ke.bind(null,[e,t]),r)]);return}let n=r/z,a=(ue+n)%le;Ee[a].push([e,t]),A.set(e,a),x||(x=setInterval(()=>{ue=(ue+1)%le;let s=Ee[ue];for(let o=0;o<s.length;o++)Ke(s[o]);s.length=0,!A.size&&x&&(clearInterval(x),x=null);},z));},_=e=>{let t=A.get(e);if(t!==void 0){if(Array.isArray(t))clearTimeout(t[0]);else {let r=Ee[t],n=r.findIndex(([a])=>a===e);n!==-1&&r.splice(n,1);}A.delete(e),!A.size&&x&&(clearInterval(x),x=null);}};var B=new Map;function Je(e,t,r,n,a,s){if(!e)return new AbortController;let o=P(),u=B.get(e),c=null;if(u){let m=u[0],l=u[3];if(!l&&o-u[2]<n&&!m.signal.aborted)return m;l&&m.abort(se("Aborted due to new request",ee)),_(e),c=u[4];}let i=new AbortController;return B.set(e,[i,s,o,a,c]),s&&I(e,()=>{ze(e,se(t+" aborted due to timeout",Se));},r),i}async function ze(e,t=null){if(e){let r=B.get(e);r&&(t&&r[0].abort(t),ce(e));}}function ce(e){_(e),B.delete(e);}function ke(e,t){let r=B.get(e);r&&(r[4]=t,B.set(e,r));}function Te(e,t){if(!e)return null;let r=B.get(e);return r&&r[4]&&!r[3]&&P()-r[2]<t&&!r[0].signal.aborted?r[4]:null}function k(e){let t=0;for(let r=0,n=e.length;r<n;r++){let a=e.charCodeAt(r);t=t*31+a|0;}return String(t)}var dt=180*1e3,G=new Map,U=new Map,Ge=new Map;function yt(e,t){Ge.set(e,t),U.has(e)&&(Ye(e),be(e));}function We(e,t=true){let r=e==="focus"?5:6,n=P();for(let a of G.values()){if(!a[r])continue;a[1]=n;let s=t?a[4]:a[0];s&&Promise.resolve(s(t)).catch(S);}}async function fe(e,t=false){if(!e)return null;let r=G.get(e);if(r){r[1]=P();let n=t?r[4]:r[0];if(n)return await n(t)}return null}function Rt(e){Ye(e);let t=e==="focus"?5:6;G.forEach((r,n)=>{r[t]&&Pt(n);});}function be(e){if(U.has(e))return;let t=We.bind(null,e,true),r=Ge.get(e);if(r){let n=r(t);U.set(e,n);return}je()&&(window.addEventListener(e,t),U.set(e,()=>window.removeEventListener(e,t)));}function Ye(e){let t=U.get(e);t&&(t(),U.delete(e));}function $e(e,t,r,n,a,s,o){G.set(e,[t,P(),dt,n,a,s,o]),s&&be("focus"),o&&be("online"),n&&I("s:"+e,fe.bind(null,e,true),n*1e3);}function Pt(e){G.delete(e),_("s:"+e);}var W=new Map;function ht(e){let t=W.get(e);return t||(t=new Set,W.set(e,t)),t}function gt(e,t){ht(e).add(t);}function Dt(e,t){let r=W.get(e);r&&(r.delete(t),r.size===0&&W.delete(e));}function H(e,t){let r=W.get(e);if(r)if(r.size===1){let n=r.values().next().value;n(t);}else r.forEach(n=>n(t));}function Et(e,t){return e?(gt(e,t),()=>{Dt(e,t);}):S}var xe=(De()?60:30)*1e3,M={strategy:te,timeout:xe,headers:{Accept:j+", text/plain, */*","Accept-Encoding":"gzip, deflate, br"},retry:{delay:xe/30,maxDelay:xe,resetTimeout:true,backoff:1.5,retryOn:[408,409,425,429,500,502,503,504]}};function Tt(e){let t=J(e);return Object.assign(M,t),M}function Xe(){return {...M}}function we(e,t){if(!t)return Ze(e,Xe());let r=J(t),n=Y(M,r);return Ze(e,n)}function Ze(e,t){let r=t.method;r=r?r.toUpperCase():Q;let n;r!==Q&&r!==Ne&&(n=t.body??t.data,n&&typeof n!==b&&he(n)&&(n=JSON.stringify(n))),bt(t.headers,n);let a=t.withCredentials?"include":t.credentials,s=Le(e,t.urlPathParams),o=Me(s,t.params),c=ne(e)?"":t.baseURL||t.apiUrl||"";return t.url=c+o,t.method=r,t.credentials=a,t.body=n,t}function bt(e,t){if(!e||!t||t instanceof FormData||typeof Blob!==R&&t instanceof Blob||typeof File!==R&&t instanceof File||typeof ReadableStream!==R&&t instanceof ReadableStream)return;let r;if(re(t))r=C+"x-www-form-urlencoded";else if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))r=C+"octet-stream";else if(he(t))r=j+";"+Qe;else return;e instanceof Headers?e.has(w)||e.set(w,r):d(e)&&!Array.isArray(e)&&!e[w]&&(e[w]=r);}function Y(e,t){let r=Object.assign({},e,t);return Ve("retry",r,e,t),Ve("headers",r,e,t),Ce("onRequest",r,e,t),Ce("onResponse",r,e,t),Ce("onError",r,e,t),r}function Ce(e,t,r,n){let a=r[e],s=n[e];if(!a&&!s)return;if(!a){t[e]=s;return}if(!s){t[e]=a;return}let o=Array.isArray(a)?a:[a],u=Array.isArray(s)?s:[s];t[e]=e==="onResponse"?u.concat(o):o.concat(u);}function Ve(e,t,r,n){n[e]&&(t[e]={...r[e],...n[e]});}var pe=new Map,F="|",qe=64,et=/[^\w\-_|/:@.?=&~%#]/g,tt=/[^\w\-_|/:@.?=&~%#]/,xt=new Set(["accept","accept-language","accept-encoding","authorization","content-type","referer","origin","user-agent","cookie","x-api-key","x-requested-with","x-client-id","x-tenant-id","x-user-id","x-app-version","x-feature-flag","x-device-id","x-platform","x-session-id","x-locale"]);function $(e,t=true){let r=e.cacheKey;if(r&&t)return typeof r===b?r:r(e);let{url:n="",method:a=Q,headers:s=null,body:o=null,credentials:u="same-origin"}=e,c="";if(s){let l;s instanceof Headers?l=ae(s):l=s;let p=Object.keys(l),h=p.length;h>1&&p.sort();let f="";for(let D=0;D<h;++D)xt.has(p[D].toLowerCase())&&(f+=p[D]+":"+l[p[D]]+";");c=k(f);}if(a===Q){let l=a+F+n+F+u+F+c;return tt.test(l)?l.replace(et,""):l}let i="";if(o)if(typeof o===b)i=o.length<qe?o:k(o);else if(o instanceof FormData)o.forEach((l,p)=>{i+=p+"="+l+"&";}),i.length>qe&&(i=k(i));else if(typeof Blob!==R&&o instanceof Blob||typeof File!==R&&o instanceof File)i="BF"+o.size+o.type;else if(o instanceof ArrayBuffer||ArrayBuffer.isView(o))i="AB"+o.byteLength;else {let l=d(o)?JSON.stringify(He(o)):String(o);i=l.length>qe?k(l):l;}let m=a+F+n+F+u+F+c+F+i;return tt.test(m)?m.replace(et,""):m}function rt(e){return e.expiry?P()>e.expiry:false}function Ct(e){return e.stale?P()>e.stale:false}function de(e){return pe.get(e)}function ye(e,t,r,n){if(r===0){me(e);return}let a=P(),s=r?r*1e3:0,o=n?n*1e3:0;pe.set(e,{data:t,time:a,stale:o>0?a+o:void 0,expiry:r===-1?void 0:a+s}),s>0&&I("c:"+e,()=>{me(e,true);},s);}function me(e,t=false){if(t){let r=de(e);if(!r||!rt(r))return}pe.delete(e);}async function Ae(e,t,r){if(!e)return null;let n=de(e);if(!n)return null;let a=d(t)?J(t):t,s={...n.data,data:a},o={...n,data:s};return pe.set(e,o),H(e,s),r&&r.refetch?await fe(e):null}function Re(e,t,r){if(!e||t===void 0||t===null)return null;let n=r.cacheBuster||M.cacheBuster;if(n&&n(r)||r.cache&&r.cache==="reload")return null;let a=de(e);if(!a)return null;let s=rt(a),o=Ct(a);return s?(me(e),null):!o||o&&!s?a.data:null}function Ie(e,t,r=false){let n=t.cacheKey;if(n){let a=t.cacheTime,s=t.skipCache;a&&(!r||t.cacheErrors)&&!(s&&s(e,t))&&ye(n,e,a,t.staleTime),H(n,e),ce(n);let o=t._prevKey;o&&ce(o);}}async function nt(e){if(!e)return null;let t=e.headers?.get(w);t?t=t.toLowerCase().trim():t="";let r=t.split(";",1)[0],n;try{if(r.includes(j)||r.includes("+json"))n=await e.json();else if((r.includes("multipart/form-data")||r.includes(C+"x-www-form-urlencoded"))&&typeof e.formData===g)n=await e.formData();else if(r.includes(C+"octet-stream")&&typeof e.blob===g)n=await e.blob();else if(n=await e.text(),typeof n===b){let a=n.trim();if(a.startsWith("{")&&a.endsWith("}")||a.startsWith("[")&&a.endsWith("]"))try{n=JSON.parse(a);}catch{}}}catch{n=null;}return n}var Be=(e,t,r=null)=>{let n=t.defaultResponse,a=t.cacheKey,s=Ae.bind(null,a);if(!e)return {ok:false,error:r,data:n??null,headers:null,config:t,mutate:s,isFetching:false,isSuccess:false,isError:true};let o=typeof Response===g&&e instanceof Response,u=e.data;n!==void 0&&(u==null||typeof u===K&&Object.keys(u).length===0)&&(e.data=u=n),t.flattenResponse&&(e.data=u=ge(u)),t.select&&(e.data=u=t.select(u));let c=ae(e.headers);return o?{body:e.body,bodyUsed:e.bodyUsed,ok:e.ok,redirected:e.redirected,type:e.type,url:e.url,status:e.status,statusText:e.statusText,blob:()=>e.blob(),json:()=>e.json(),text:()=>e.text(),clone:()=>e.clone(),arrayBuffer:()=>e.arrayBuffer(),formData:()=>e.formData(),bytes:()=>e.bytes(),error:r,data:u,headers:c,config:t,mutate:s,isFetching:false,isSuccess:e.ok&&!r,isError:!!r}:(d(e)&&(e.error=r,e.headers=c,e.isFetching=false,e.mutate=s,e.isSuccess=e.ok&&!r,e.isError=!!r),e)};function at(e){let t=Date.parse(e)-P();return isNaN(t)?null:Math.max(0,Math.floor(t))}function wt(e){if(!e)return null;let t=e.headers||{},r=t["retry-after"];if(r){let o=Number(r);if(!isNaN(o)&&o>=0)return o*1e3;let u=at(r);if(u!==null)return u}let n="ratelimit-reset",a=t[n+"-after"]||t["x-"+n+"-after"];if(a){let o=Number(a);if(!isNaN(o))return o*1e3}let s=t[n+"-at"]||t["x-"+n+"-at"];return s?at(s):null}async function st(e,t){let{retries:r=0,delay:n=0,backoff:a=1,maxDelay:s,retryOn:o=[],shouldRetry:u}=t,c=0,i=n,m=r>0?r:0,l;for(;c<=m;){if(c>0&&l){let f=l.config,D=f.onRetry;D&&(await q(D,l,c),f._isAutoKey&&(f._prevKey=f.cacheKey,f.cacheKey=$(f,false)));}l=await e(c>0,c);let p=l.error;if(!p){if(u&&c<m&&await u(l,c)){await N(i),i*=a||1,i=Math.min(i,s||i),c++;continue}break}if(await qt(l,c,m,u,o))break;if(p.status===429||p.status===503){let f=wt(l);f!==null&&(i=f);}await N(i),i*=a||1,i=Math.min(i,s||i),c++;}return l}async function qt(e,t,r,n,a=[]){if(t===r)return  true;let s=null;return n&&(s=await n(e,t),s!==null)?!s:!(a||[]).includes(e.error?.status??0)}async function ot(e,t,r,n=0,a=0){if(!t)return e();let s=0,o;for(;(n===0||s<n)&&(a>0&&await N(a),o=await e(),s++,!(n>0&&s>=n||!t||r&&r(o,s)));)await N(t);return o}async function it(e,t,r){let n=await t(e),a=n.error;if(!a)return Ie(n,r),n;r.onError&&await q(r.onError,a);let s=a.isCancelled;if(!s&&r.logger&&At(r,"FETCH ERROR",a),Ie(n,r,true),!s||r.rejectCancelled){let u=r.strategy;if(u===te)return Promise.reject(a);u==="silent"&&await new Promise(()=>null);}return n}function ut(e,t,r){e.status=e.status||t?.status||0,e.statusText=e.statusText||t?.statusText||"",e.config=e.request=r,e.response=t,e.isCancelled=e.name===ee;}function At(e,...t){let r=e.logger;r&&r.warn&&r.warn(...t);}var Fe={isFetching:true};async function Pe(e,t=null){let r=we(e,t),{timeout:n,cancellable:a,cacheKey:s,dedupeTime:o,cacheTime:u,staleTime:c,refetchOnFocus:i,refetchOnReconnect:m,pollingInterval:l=0}=r,p=u!==void 0||c!==void 0,h=!!(s||n||o||p||a||i||m),f=null;if(h&&(f=$(r)),f&&p){let E=Re(f,u,r);if(E)return E}if(f&&o){let E=Te(f,o);if(E)return E}let D=r.retry||{},{retries:lt=0,resetTimeout:ct}=D,ve=async(E=false,V=0)=>{V||(f&&!E&&(c?Re(f,u,r)||(ye(f,Fe,u,c),H(f,Fe)):H(f,Fe)),r.cacheKey=f);let v=r.url,mt=Je(f,v,n,o||0,!!a,!!(n&&(!V||ct))),T=r;T.signal=mt.signal;let X,y=null;try{r.onRequest&&(f&&o&&!V&&await null,await q(r.onRequest,T));let O=r.fetcher;if(y=O?await O(v,T):await fetch(v,T),d(y)&&(typeof Response===g&&y instanceof Response?y.data=await nt(y):O&&("data"in y&&"body"in y||(y={data:y})),y.config=T,y.ok!==void 0&&!y.ok))throw new ie(`${T.method} to ${v} failed! Status: ${y.status||null}`,T,y);X=Be(y,T);let L=r.onResponse;L&&await q(L,X);}catch(O){let L=O;ut(L,y,T),X=Be(y,T,L);}return X},ft=lt>0?(E=false)=>st((V,v)=>ve(E,v),D):ve,Z=(E=false)=>it(E,ft,r),Oe=l?ot(Z,l,r.shouldStopPolling,r.maxPollingAttempts,r.pollingDelay):Z();return f&&(o&&ke(f,Oe),$e(f,Z,void 0,c,Z,!!i,!!m)),Oe}function It(e){let t=e.endpoints;function r(a){return console.error(`Add ${a} to 'endpoints'.`),Promise.resolve(null)}let n={config:e,endpoints:t,async request(a,s={}){let o=t[a],u=o||{url:String(a)},c=u.url;if(c.startsWith("//"))throw new Error("Protocol-relative URLs are not allowed.");let i=ne(c)?o?.url===c?Y(u,s):s:Y(Y(e,u),s);return Pe(c,i)}};return new Proxy(n,{get(a,s){return s in n?n[s]:t[s]?n.request.bind(null,s):r.bind(null,s)}})}
exports.abortRequest=ze;exports.addTimeout=I;exports.buildConfig=we;exports.createAbortError=se;exports.createApiFetcher=It;exports.deleteCache=me;exports.fetchf=Pe;exports.fetchff=Pe;exports.generateCacheKey=$;exports.getCache=de;exports.getCachedResponse=Re;exports.getDefaultConfig=Xe;exports.getInFlightPromise=Te;exports.isSlowConnection=De;exports.mutate=Ae;exports.removeRevalidators=Rt;exports.revalidate=fe;exports.revalidateAll=We;exports.setCache=ye;exports.setDefaultConfig=Tt;exports.setEventProvider=yt;exports.subscribe=Et;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map