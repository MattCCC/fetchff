'use strict';var w="application/",z=w+"json",Qe="charset=utf-8",C="Content-Type",P="undefined",J="object",b="string",D="function",re="AbortError",Ne="TimeoutError",Q="GET",Se="HEAD",ae="reject";var He=10;function ne(e){return e instanceof URLSearchParams}function d(e){return e!==null&&typeof e===J}function k(e){let t=Object.prototype.hasOwnProperty.call(e,"__proto__"),r=Object.prototype.hasOwnProperty.call(e,"constructor"),a=Object.prototype.hasOwnProperty.call(e,"prototype");if(!t&&!r&&!a)return e;let n={...e};return t&&delete n.__proto__,r&&delete n.constructor,a&&delete n.prototype,n}function Ue(e){let t=Object.keys(e);t.sort();let r={};for(let a=0,n=t.length;a<n;a++){let s=t[a];r[s]=e[s];}return r}function _e(e,t){return t?e.includes("?")?`${e}&${t}`:`${e}?${t}`:e}function Me(e,t){if(!t)return e;if(ne(t)){let c=t.toString();return _e(e,c)}let r=[],a=encodeURIComponent,n=(c,i)=>{i=typeof i===D?i():i,i=i===null||i===void 0?"":i,r[r.length]=a(c)+"="+a(i);},s=(c,i,m=0)=>{if(m>=He)return r;let l,p,g;if(c)if(Array.isArray(i))for(l=0,p=i.length;l<p;l++)s(c+"["+(typeof i[l]===J&&i[l]?l:"")+"]",i[l],m+1);else if(d(i))for(g in i)s(c+"["+g+"]",i[g],m+1);else n(c,i);else if(Array.isArray(i))for(l=0,p=i.length;l<p;l++)n(i[l].name,i[l].value);else for(g in i)s(g,i[g],m+1);return r},u=s("",t).join("&").replace(/%5B%5D/g,"[]");return _e(e,u)}function Le(e,t){if(!t||e.indexOf(":")===-1)return e;let r=t;return e.replace(/:([a-zA-Z0-9_]+)/g,(a,n)=>{if(Object.prototype.hasOwnProperty.call(r,n)){let s=r[n];if(s!=null)return encodeURIComponent(String(s))}return a})}function se(e){return e.includes("://")}var h=()=>Date.now(),N=()=>{};function he(e){let t=typeof e;return e==null?false:t===b||t==="number"||t==="boolean"||Array.isArray(e)?true:typeof globalThis!==P&&typeof globalThis.Buffer!==P&&globalThis.Buffer.isBuffer(e)||e instanceof Date||ne(e)?false:!!(d(e)&&(Object.getPrototypeOf(e)===Object.prototype||typeof e.toJSON===D))}async function S(e){return new Promise(t=>setTimeout(()=>t(true),e))}function ge(e,t=0){return t>=He?e:e&&d(e)&&typeof e.data!==P?ge(e.data,t+1):e}function A(e){if(!e)return {};let t={};if(e instanceof Headers)e.forEach((r,a)=>{t[a.toLowerCase()]=r;});else if(d(e))for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r.toLowerCase()]=e[r]);return t}function je(){return typeof window!==P&&typeof window.addEventListener===D}function oe(e,t){if(typeof DOMException!==P)return new DOMException(e,t);let r=new Error(e);return r.name=t,r}var De=()=>{let e=typeof navigator!==P&&navigator.connection;return e&&["slow-2g","2g","3g"].includes(e.effectiveType)};async function I(e,t,...r){if(e){if(typeof e===D){let a=await e(t,...r);a&&d(t)&&d(a)&&Object.assign(t,a);}else if(Array.isArray(e))for(let a of e){let n=await a(t,...r);n&&d(t)&&d(n)&&Object.assign(t,n);}}}var ie=class extends Error{constructor(r,a,n){super(r);this.request=a;this.response=n;this.name="FetchError",this.status=n?n.status:0,this.statusText=n?n.statusText:"",this.config=a,this.isCancelled=false;}status;statusText;config;isCancelled};var ue=class extends ie{constructor(t,r,a){super(t,r,a),this.name="ResponseError";}};var ce=600,G=1e3,dt=ce*G,Ee=Array(ce).fill(0).map(()=>[]),q=new Map,le=0,x=null,Ke=([e,t])=>{q.delete(e);try{let r=t();r&&r instanceof Promise&&r.catch(N);}catch{}},B=(e,t,r)=>{if(_(e),r<G||r>dt||r%G!==0){q.set(e,[setTimeout(Ke.bind(null,[e,t]),r)]);return}let a=r/G,n=(le+a)%ce;Ee[n].push([e,t]),q.set(e,n),x||(x=setInterval(()=>{le=(le+1)%ce;let s=Ee[le];for(let o=0;o<s.length;o++)Ke(s[o]);s.length=0,!q.size&&x&&(clearInterval(x),x=null);},G));},_=e=>{let t=q.get(e);if(t!==void 0){if(Array.isArray(t))clearTimeout(t[0]);else {let r=Ee[t],a=r.findIndex(([n])=>n===e);a!==-1&&r.splice(a,1);}q.delete(e),!q.size&&x&&(clearInterval(x),x=null);}};var H=new Map;function ze(e,t,r,a,n,s){if(!e)return new AbortController;let o=h(),u=H.get(e),c=null;if(u){let m=u[0],l=u[3];if(!l&&o-u[2]<a&&!m.signal.aborted)return m;l&&m.abort(oe("Aborted due to new request",re)),_(e),c=u[4];}let i=new AbortController;return H.set(e,[i,s,o,n,c]),s&&B(e,()=>{Je(e,oe(t+" aborted due to timeout",Ne));},r),i}async function Je(e,t=null){if(e){let r=H.get(e);r&&(t&&r[0].abort(t),fe(e));}}function fe(e){_(e),H.delete(e);}function ke(e,t){let r=H.get(e);r&&(r[4]=t);}function Te(e,t){if(!e)return null;let r=H.get(e);return r&&r[4]&&!r[3]&&h()-r[2]<t&&!r[0].signal.aborted?r[4]:null}function W(e){let t=0;for(let r=0,a=e.length;r<a;r++){let n=e.charCodeAt(r);t=t*31+n|0;}return String(t)}var Ge=180*1e3,M=new Map,U=new Map,We=new Map;function yt(e,t){We.set(e,t),U.has(e)&&($e(e),be(e));}function Ye(e,t=true){let r=e==="focus"?5:6,a=h();M.forEach(n=>{if(!n[r])return;n[1]=a;let s=t?n[4]:n[0];s&&Promise.resolve(s(t)).catch(N);});}async function me(e,t=false){if(!e)return null;let r=M.get(e);if(r){r[1]=h();let a=t?r[4]:r[0];if(a)return await a(t)}return null}function Rt(e){$e(e);let t=e==="focus"?5:6;M.forEach((r,a)=>{r[t]&&Pt(a);});}function be(e){if(U.has(e))return;let t=Ye.bind(null,e,true),r=We.get(e);if(r){let a=r(t);U.set(e,a);return}je()&&(window.addEventListener(e,t),U.set(e,()=>window.removeEventListener(e,t)));}function $e(e){let t=U.get(e);t&&(t(),U.delete(e));}function Ze(e,t,r,a,n,s,o){let u=M.get(e);u?(u[0]=t,u[1]=h(),u[2]=Ge,u[3]=a,u[4]=n,u[5]=s,u[6]=o):M.set(e,[t,h(),Ge,a,n,s,o]),s&&be("focus"),o&&be("online"),a&&B("s:"+e,me.bind(null,e,true),a*1e3);}function Pt(e){M.delete(e),_("s:"+e);}var Y=new Map;function ht(e){let t=Y.get(e);return t||(t=new Set,Y.set(e,t)),t}function gt(e,t){ht(e).add(t);}function Dt(e,t){let r=Y.get(e);r&&(r.delete(t),r.size===0&&Y.delete(e));}function L(e,t){let r=Y.get(e);if(r)if(r.size===1){let a=r.values().next().value;a(t);}else r.forEach(a=>a(t));}function Et(e,t){return e?(gt(e,t),()=>{Dt(e,t);}):N}var xe=(De()?60:30)*1e3,$={strategy:ae,timeout:xe,headers:{Accept:z+", text/plain, */*","Accept-Encoding":"gzip, deflate, br"},retry:{delay:xe/30,maxDelay:xe,resetTimeout:true,backoff:1.5,retryOn:[408,409,425,429,500,502,503,504]}};function Tt(e){let t=k(e);return j({},t,$)}function et(){return {...$}}function Ce(e,t){if(!t)return Ve(e,et());let r=k(t),a=j($,r);return Ve(e,a)}function Ve(e,t){let r=t.method;r=r?r.toUpperCase():Q;let a;r!==Q&&r!==Se&&(a=t.body??t.data,a&&typeof a!==b&&he(a)&&(a=JSON.stringify(a))),bt(t.headers,a);let n=t.withCredentials?"include":t.credentials,s=Le(e,t.urlPathParams),o=Me(s,t.params),c=se(e)?"":t.baseURL||t.apiUrl||"";return t.url=c+o,t.method=r,t.credentials=n,t.body=a,t}function bt(e,t){if(!e||!t||t instanceof FormData||typeof Blob!==P&&t instanceof Blob||typeof File!==P&&t instanceof File||typeof ReadableStream!==P&&t instanceof ReadableStream)return;let r;if(ne(t))r=w+"x-www-form-urlencoded";else if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))r=w+"octet-stream";else if(he(t))r=z+";"+Qe;else return;e instanceof Headers?e.has(C)||e.set(C,r):d(e)&&!Array.isArray(e)&&!e[C]&&(e[C]=r);}function j(e,t,r={}){return Object.assign(r,e,t),Xe("retry",e,t,r),Xe("headers",e,t,r),we("onRequest",e,t,r),we("onResponse",e,t,r),we("onError",e,t,r),r}function we(e,t,r,a){let n=t[e],s=r[e];if(!n&&!s)return;if(!n){a[e]=s;return}if(!s){a[e]=n;return}let o=Array.isArray(n)?n:[n],u=Array.isArray(s)?s:[s];a[e]=e==="onResponse"?u.concat(o):o.concat(u);}function Xe(e,t,r,a){if(r[e]){let n=t[e],s=r[e];if(e==="headers"&&(n instanceof Headers||s instanceof Headers)){let o=A(n),u=A(s);a[e]={...o,...u};}else a[e]={...n,...s};}}var de=new Map,F="|",Ae=64,tt=/[^\w\-_|/:@.?=&~%#]/g,rt=/[^\w\-_|/:@.?=&~%#]/,xt=new Set(["accept","accept-language","accept-encoding","authorization","content-type","referer","origin","user-agent","cookie","x-api-key","x-requested-with","x-client-id","x-tenant-id","x-user-id","x-app-version","x-feature-flag","x-device-id","x-platform","x-session-id","x-locale"]);function Z(e,t=true){let r=e.cacheKey;if(r&&t)return typeof r===b?r:r(e);let{url:a="",method:n=Q,headers:s=null,body:o=null,credentials:u="same-origin"}=e,c="";if(s){let l;s instanceof Headers?l=A(s):l=s;let p=Object.keys(l),g=p.length;g>1&&p.sort();let f="";for(let E=0;E<g;++E)xt.has(p[E].toLowerCase())&&(f+=p[E]+":"+l[p[E]]+";");c=W(f);}if(n===Q){let l=n+F+a+F+u+F+c;return rt.test(l)?l.replace(tt,""):l}let i="";if(o)if(typeof o===b)i=o.length<Ae?o:W(o);else if(o instanceof FormData)o.forEach((l,p)=>{i+=p+"="+l+"&";}),i.length>Ae&&(i=W(i));else if(typeof Blob!==P&&o instanceof Blob||typeof File!==P&&o instanceof File)i="BF"+o.size+o.type;else if(o instanceof ArrayBuffer||ArrayBuffer.isView(o))i="AB"+o.byteLength;else {let l=d(o)?JSON.stringify(Ue(o)):String(o);i=l.length>Ae?W(l):l;}let m=n+F+a+F+u+F+c+F+i;return rt.test(m)?m.replace(tt,""):m}function at(e){return e.expiry?h()>e.expiry:false}function ye(e){return de.get(e)}function Re(e,t,r,a){if(r===0){pe(e);return}let n=h(),s=r?r*1e3:0,o=a?a*1e3:0;de.set(e,{data:t,time:n,stale:o>0?n+o:void 0,expiry:r===-1?void 0:n+s}),s>0&&B("c:"+e,()=>{pe(e,true);},s);}function pe(e,t=false){if(t){let r=ye(e);if(!r||!at(r))return}de.delete(e);}async function Ie(e,t,r){if(!e)return null;let a=ye(e);if(!a)return null;let n=d(t)?k(t):t,s={...a.data,data:n},o={...a,data:s};return de.set(e,o),L(e,s),r&&r.refetch?await me(e):null}function V(e,t,r){if(!e||t===void 0||t===null)return null;let a=r.cacheBuster||$.cacheBuster;if(a&&a(r)||r.cache&&r.cache==="reload")return null;let n=ye(e);return n?at(n)?(pe(e),null):n.data:null}function qe(e,t,r=false){let a=t.cacheKey;if(a){let n=t.cacheTime,s=t.skipCache;n&&(!r||t.cacheErrors)&&!(s&&s(e,t))&&Re(a,e,n,t.staleTime),L(a,e),fe(a);let o=t._prevKey;o&&fe(o);}}async function nt(e){if(!e)return null;let t=e.headers?.get(C);t?t=t.toLowerCase().trim():t="";let r=t.split(";",1)[0],a;try{if(r.includes(z)||r.includes("+json"))a=await e.json();else if((r.includes("multipart/form-data")||r.includes(w+"x-www-form-urlencoded"))&&typeof e.formData===D)a=await e.formData();else if(r.includes(w+"octet-stream")&&typeof e.blob===D)a=await e.blob();else if(a=await e.text(),typeof a===b){let n=a.trim();if(n.startsWith("{")&&n.endsWith("}")||n.startsWith("[")&&n.endsWith("]"))try{a=JSON.parse(n);}catch{}}}catch{a=null;}return a}var Be=(e,t,r=null)=>{let a=t.defaultResponse,n=t.cacheKey,s=Ie.bind(null,n);if(!e)return {ok:false,error:r,data:a??null,headers:null,config:t,mutate:s,isFetching:false,isSuccess:false,isError:true};let o=typeof Response===D&&e instanceof Response,u=e.data;a!==void 0&&(u==null||typeof u===J&&Object.keys(u).length===0)&&(e.data=u=a),t.flattenResponse&&(e.data=u=ge(u)),t.select&&(e.data=u=t.select(u));let c=A(e.headers);return o?{body:e.body,bodyUsed:e.bodyUsed,ok:e.ok,redirected:e.redirected,type:e.type,url:e.url,status:e.status,statusText:e.statusText,blob:()=>e.blob(),json:()=>e.json(),text:()=>e.text(),clone:()=>e.clone(),arrayBuffer:()=>e.arrayBuffer(),formData:()=>e.formData(),bytes:()=>e.bytes(),error:r,data:u,headers:c,config:t,mutate:s,isFetching:false,isSuccess:e.ok&&!r,isError:!!r}:(d(e)&&(e.error=r,e.headers=c,e.isFetching=false,e.mutate=s,e.isSuccess=e.ok&&!r,e.isError=!!r),e)};function st(e){let t=Date.parse(e)-h();return isNaN(t)?null:Math.max(0,Math.floor(t))}function wt(e){if(!e)return null;let t=e.headers||{},r=t["retry-after"];if(r){let o=Number(r);if(!isNaN(o)&&o>=0)return o*1e3;let u=st(r);if(u!==null)return u}let a="ratelimit-reset",n=t[a+"-after"]||t["x-"+a+"-after"];if(n){let o=Number(n);if(!isNaN(o))return o*1e3}let s=t[a+"-at"]||t["x-"+a+"-at"];return s?st(s):null}async function ot(e,t){let{retries:r=0,delay:a=0,backoff:n=1,maxDelay:s,retryOn:o=[],shouldRetry:u}=t,c=0,i=a,m=r>0?r:0,l;for(;c<=m;){if(c>0&&l){let f=l.config,E=f.onRetry;E&&(await I(E,l,c),f._isAutoKey&&(f._prevKey=f.cacheKey,f.cacheKey=Z(f,false)));}l=await e(c>0,c);let p=l.error;if(!p){if(u&&c<m&&await u(l,c)){await S(i),i*=n||1,i=Math.min(i,s||i),c++;continue}break}if(await Ct(l,c,m,u,o))break;if(p.status===429||p.status===503){let f=wt(l);f!==null&&(i=f);}await S(i),i*=n||1,i=Math.min(i,s||i),c++;}return l}async function Ct(e,t,r,a,n=[]){if(t===r)return  true;let s=null;return a&&(s=await a(e,t),s!==null)?!s:!(n||[]).includes(e.error?.status??0)}async function it(e,t,r,a=0,n=0){if(!t)return e();let s=0,o;for(;(a===0||s<a)&&(n>0&&await S(n),o=await e(),s++,!(a>0&&s>=a||!t||r&&r(o,s)));)await S(t);return o}async function ut(e,t,r){let a=await t(e),n=a.error;if(!n)return qe(a,r),a;r.onError&&await I(r.onError,n);let s=n.isCancelled;if(!s&&r.logger&&At(r,"FETCH ERROR",n),qe(a,r,true),!s||r.rejectCancelled){let u=r.strategy;if(u===ae)return Promise.reject(n);u==="silent"&&await new Promise(()=>null);}return a}function lt(e,t,r){e.status=e.status||t?.status||0,e.statusText=e.statusText||t?.statusText||"",e.config=e.request=r,e.response=t,e.isCancelled=e.name===re;}function At(e,...t){let r=e.logger;r&&r.warn&&r.warn(...t);}var Fe=Object.freeze({isFetching:true});async function Pe(e,t=null){if(t&&typeof t.cacheKey=="string"){let R=V(t.cacheKey,t.cacheTime,t);if(R)return R}let r=Ce(e,t),{timeout:a,cancellable:n,cacheKey:s,dedupeTime:o,cacheTime:u,staleTime:c,refetchOnFocus:i,refetchOnReconnect:m,pollingInterval:l=0}=r,p=u!==void 0||c!==void 0,g=!!(s||a||o||p||n||i||m),f=null;if(g&&(f=Z(r)),f&&p){let R=V(f,u,r);if(R)return R}if(f&&o){let R=Te(f,o);if(R)return R}let E=r.retry||{},{retries:ct=0,resetTimeout:ft}=E,Oe=async(R=false,ee=0)=>{ee||(f&&!R&&(c?V(f,u,r)||(Re(f,Fe,u,c),L(f,Fe)):L(f,Fe)),r.cacheKey=f);let O=r.url,pt=ze(f,O,a,o||0,!!n,!!(a&&(!ee||ft))),T=r;T.signal=pt.signal;let te,y=null;try{r.onRequest&&(f&&o&&!ee&&await null,await I(r.onRequest,T));let v=r.fetcher;if(y=v?await v(O,T):await fetch(O,T),d(y)&&(typeof Response===D&&y instanceof Response?y.data=await nt(y):v&&("data"in y&&"body"in y||(y={data:y})),y.config=T,y.ok!==void 0&&!y.ok))throw new ue(`${T.method} to ${O} failed! Status: ${y.status||null}`,T,y);te=Be(y,T);let K=r.onResponse;K&&await I(K,te);}catch(v){let K=v;lt(K,y,T),te=Be(y,T,K);}return te},mt=ct>0?(R=false)=>ot((ee,O)=>Oe(R,O),E):Oe,X=(R=false)=>ut(R,mt,r),ve=l?it(X,l,r.shouldStopPolling,r.maxPollingAttempts,r.pollingDelay):X();return f&&(o&&ke(f,ve),(c||i||m)&&Ze(f,X,void 0,c,X,!!i,!!m)),ve}function It(e){let t=e.endpoints;function r(n){return console.error(`Add ${n} to 'endpoints'.`),Promise.resolve(null)}let a={config:e,endpoints:t,async request(n,s={}){let o=t[n],u=o||{url:String(n)},c=u.url;if(c.startsWith("//"))throw new Error("Protocol-relative URLs are not allowed.");let i=se(c)?o?.url===c?j(u,s):s:j(j(e,u),s);return Pe(c,i)}};return new Proxy(a,{get(n,s){return s in a?a[s]:t[s]?a.request.bind(null,s):r.bind(null,s)}})}
exports.abortRequest=Je;exports.addTimeout=B;exports.buildConfig=Ce;exports.createAbortError=oe;exports.createApiFetcher=It;exports.deleteCache=pe;exports.fetchf=Pe;exports.fetchff=Pe;exports.generateCacheKey=Z;exports.getCache=ye;exports.getCachedResponse=V;exports.getDefaultConfig=et;exports.getInFlightPromise=Te;exports.isSlowConnection=De;exports.mutate=Ie;exports.removeRevalidators=Rt;exports.revalidate=me;exports.revalidateAll=Ye;exports.setCache=Re;exports.setDefaultConfig=Tt;exports.setEventProvider=yt;exports.subscribe=Et;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map