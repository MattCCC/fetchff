"use strict";var fetchff=(()=>{var k=Object.defineProperty;var Qe=Object.getOwnPropertyDescriptor;var Ne=Object.getOwnPropertyNames;var Se=Object.prototype.hasOwnProperty;var _e=(e,t,a)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var ke=(e,t)=>{for(var a in t)k(e,a,{get:t[a],enumerable:!0})},Me=(e,t,a,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ne(t))!Se.call(e,s)&&s!==a&&k(e,s,{get:()=>t[s],enumerable:!(r=Qe(t,s))||r.enumerable});return e};var Le=e=>Me(k({},"__esModule",{value:!0}),e);var O=(e,t,a)=>_e(e,typeof t!="symbol"?t+"":t,a);var Je={};ke(Je,{createApiFetcher:()=>ve,fetchf:()=>ce});async function b(e,t){if(t){if(typeof t=="function"){let a=await t(e);a&&Object.assign(e,a)}else if(Array.isArray(t))for(let a of t){let r=await a(e);r&&Object.assign(e,r)}}}var M=class extends Error{constructor(a,r,s){super(a);O(this,"status");O(this,"statusText");O(this,"request");O(this,"config");O(this,"response");this.name="FetchError",this.message=a,this.status=(s==null?void 0:s.status)||0,this.statusText=(s==null?void 0:s.statusText)||"",this.request=r,this.config=r,this.response=s}};var L=class extends M{constructor(t,a,r){super(t,a,r),this.name="ResponseError"}};var j="application/",A=j+"json",Re="charset=utf-8",w="Content-Type",E="undefined",C="object",v="string",U="function",J="AbortError",me="TimeoutError",ye="CanceledError",H="GET",Pe="HEAD";var ge=10,De=["__proto__","constructor","prototype"];function se(e){return e instanceof URLSearchParams}function $(e){return e!==null&&typeof e===C}function Te(e){let t="";for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t+=a+":"+e[a]);return t}function ne(e){if(!e||typeof e!==C||Array.isArray(e))return e;let t={...e};return De.forEach(a=>{delete t[a]}),t}function re(e){let t={},a=Object.keys(e);a.sort();for(let r=0,s=a.length;r<s;r++){let p=a[r];De.includes(p)||(t[p]=e[p])}return t}function he(e,t){return t?e.includes("?")?`${e}&${t}`:`${e}?${t}`:e}function Ee(e,t){if(!t)return e;if(se(t)){let f=t.toString();return he(e,f)}let a=[],r=encodeURIComponent,s=(f,o)=>{o=typeof o===U?o():o,o=o===null||o===void 0?"":o,a[a.length]=r(f)+"="+r(o)},p=(f,o,P=0)=>{if(P>=ge)return a;let d,h,D;if(f)if(Array.isArray(o))for(d=0,h=o.length;d<h;d++)p(f+"["+(typeof o[d]===C&&o[d]?d:"")+"]",o[d],P+1);else if($(o))for(D in o)p(f+"["+D+"]",o[D],P+1);else s(f,o);else if(Array.isArray(o))for(d=0,h=o.length;d<h;d++)s(o[d].name,o[d].value);else for(D in o)p(D,o[D],P+1);return a},g=p("",t).join("&").replace(/%5B%5D/g,"[]");return he(e,g)}function Ce(e,t){return t?e.replace(/:\w+/g,a=>{let r=a.substring(1);return t[r]?encodeURIComponent(String(t[r])):a}):e}function qe(e){let t=typeof e;return t===E||e===null?!1:t===v||t==="number"||t==="boolean"||Array.isArray(e)?!0:typeof globalThis!==E&&typeof globalThis.Buffer!==E&&globalThis.Buffer.isBuffer(e)||e instanceof Date?!1:!!($(e)&&(Object.getPrototypeOf(e)===Object.prototype||typeof e.toJSON===U))}async function oe(e){return new Promise(t=>setTimeout(()=>t(!0),e))}function ie(e,t=0){return t>=ge?e:e&&$(e)&&typeof e.data!==E&&Object.keys(e).length===1?ie(e.data,t+1):e}function be(e){if(!e)return{};let t={};if(e instanceof Headers)e.forEach((a,r)=>{t[r]=a});else if($(e))for(let[a,r]of Object.entries(e))t[a.toLowerCase()]=r;return t}var Q=new Map;async function we(e,t,a=0,r=!1,s=!0){let p=Date.now(),m=Q.get(e);if(m){let o=m[3],P=m[0],d=m[1];if(!o&&p-m[2]<a)return P;o&&P.abort(new DOMException("Aborted due to new request",J)),d!==null&&clearTimeout(d),Q.delete(e)}let g=new AbortController,f=s?setTimeout(()=>{let o=new DOMException(`${e.url} aborted due to timeout`,me);z(e,o)},t):null;return Q.set(e,[g,f,p,r]),g}async function z(e,t=null){let a=Q.get(e);if(a){let r=a[0],s=a[1];t&&!r.signal.aborted&&r.abort(t),s!==null&&clearTimeout(s),Q.delete(e)}}async function xe(e){var r;if(!(e!=null&&e.body))return null;let t=String(((r=e.headers)==null?void 0:r.get(w))||"").split(";")[0],a;try{if(t.includes(A)||t.includes("+json"))a=await e.json();else if(t.includes("multipart/form-data"))a=await e.formData();else if(t.includes(j+"octet-stream"))a=await e.blob();else if(t.includes(j+"x-www-form-urlencoded"))a=await e.formData();else if(t.includes("text/"))a=await e.text();else try{a=await e.clone().json()}catch(s){a=await e.text()}}catch(s){a=null}return a}function G(e){let t=0;for(let a=0,r=e.length;a<r;a++){let s=e.charCodeAt(a);t=t*31+s|0}return String(t)}var ue=new Map;function Oe(e){let{url:t="",method:a=H,headers:r={},body:s="",mode:p="cors",credentials:m="include",cache:g="default",redirect:f="follow",referrer:o="",integrity:P=""}=e;if(g==="reload")return"";let d=Te(re(r)),h="";if(s!==null)if(typeof s=="string")h=G(s);else if(s instanceof FormData)s.forEach((D,V)=>{h+=V+"="+D+"&"}),h=G(h);else if(typeof Blob!==E&&s instanceof Blob||typeof File!==E&&s instanceof File)h="BF"+s.size+s.type;else if(s instanceof ArrayBuffer||ArrayBuffer.isView(s))h="AB"+s.byteLength;else{let D=typeof s===C?re(s):String(s);h=G(JSON.stringify(D))}return(a+t+p+m+g+f+o+P+d+h).replace(/[^\w-_]/g,"")}function je(e,t){return t?Date.now()-e>t*1e3:!1}function Fe(e,t){let a=ue.get(e);if(a){if(!je(a.timestamp,t))return a;ue.delete(e)}return null}function Ie(e,t,a=!1){ue.set(e,{data:t,isLoading:a,timestamp:Date.now()})}var le={method:H,strategy:"reject",timeout:3e4,dedupeTime:1e3,defaultResponse:null,headers:{Accept:A+", text/plain, */*","Accept-Encoding":"gzip, deflate, br"},retry:{delay:1e3,maxDelay:3e4,resetTimeout:!0,backoff:1.5,retryOn:[408,409,425,429,500,502,503,504]}};function K(e){let t=ne(e),a={...le,...t},r=(n,u,c,R)=>{R[n]&&(u[n]={...c[n],...R[n]})};r("retry",a,le,t),r("headers",a,le,t);let s=(n,u)=>typeof n[u]!==E?n[u]:a[u],p=s(t,"fetcher"),m=(p==null?void 0:p.create(a))||null,g=()=>m,f=(n,...u)=>{let c=s(n,"logger");c!=null&&c.warn&&c.warn(...u)},o=(n,u,c)=>{if(!c&&["PUT","DELETE"].includes(u))return;let R=A+";"+Re;n instanceof Headers?n.has(w)||n.set(w,R):typeof n===C&&!Array.isArray(n)&&!n[w]&&(n[w]=R)},P=(n,u)=>{let c=s(u,"method").toUpperCase(),R=c===H||c===Pe,i=Ce(n,s(u,"urlPathParams")),y=s(u,"params"),N=s(u,"body")||s(u,"data"),T;R||(T=N);let S=s(u,"headers");o(S,c,T);let _=s(u,"withCredentials")?"include":s(u,"credentials"),x=y?Ee(i,y):i,q=x.includes("://")?"":s(u,"baseURL")||s(u,"apiUrl");return T&&typeof T!==v&&!se(T)&&qe(T)&&(T=JSON.stringify(T)),{...u,credentials:_,body:T,method:c,headers:S,url:q+x}},d=async(n,u)=>{D(n)||f(u,"API ERROR",n),await b(n,u==null?void 0:u.onError),await b(n,a==null?void 0:a.onError)},h=async(n,u,c)=>{let R=D(n),i=s(c,"strategy"),y=s(c,"rejectCancelled");if(!(R&&!y)){if(i==="silent")await new Promise(()=>null);else if(i==="reject")return Promise.reject(n)}return Y(u,c,n)},D=n=>n.name===J||n.name===ye,V=async(n,u=null)=>{let c=ne(u||{}),R={...a,...c};r("retry",R,a,c),r("headers",R,a,c);let i=null,y=P(n,R),{timeout:N,cancellable:T,dedupeTime:S,pollingInterval:W,shouldStopPolling:_,cacheTime:x,cacheKey:X}=R,q;if(X?q=X(y):q=Oe(y),x&&q){let B=R.cacheBuster;if(!B||!B(y)){let l=Fe(q,x);if(l)return l.data}}let{retries:Z=0,delay:Be,backoff:Ae,retryOn:ee,shouldRetry:fe,maxDelay:Ue,resetTimeout:He}=R.retry,F=0,te=0,I=Be,pe=Z>0?Z:0;for(;F<=pe;)try{let l={signal:(await we(y,N,S,T,!!(N&&(!pe||He)))).signal,...y};if(await b(l,c==null?void 0:c.onRequest),await b(l,a==null?void 0:a.onRequest),p!==null&&m!==null&&typeof m.request===U?i=await m.request(l):i=await fetch(l.url,l),i instanceof Response&&(i.config=l,i.data=await xe(i),!i.ok))throw new L(`${l.url} failed! Status: ${i.status||null}`,l,i);if(await b(i,c==null?void 0:c.onResponse),await b(i,a==null?void 0:a.onResponse),z(y),W&&(!_||!_(i,te))){te++,f(l,"Polling attempt "+te+"..."),await oe(W);continue}let ae=Y(i,l);if(x&&q){let de=l.skipCache;(!de||!de(ae,l))&&Ie(q,ae)}return ae}catch(B){let l=B;if(l.status=(l==null?void 0:l.status)||(i==null?void 0:i.status)||0,l.statusText=(l==null?void 0:l.statusText)||(i==null?void 0:i.statusText)||"",l.config=y,l.request=y,l.response=i,F===Z||!(!fe||await fe(l,F))||!(ee!=null&&ee.includes(l.status)))return await d(l,y),z(y),h(l,i,y);f(R,`Attempt ${F+1} failed. Retry in ${I}ms.`),await oe(I),I*=Ae,I=Math.min(I,Ue),F++}return Y(i,y)},Y=(n,u,c=null)=>{let R=s(u,"defaultResponse");if(!n)return{ok:!1,error:c,data:R,headers:null,config:u};let i=n==null?void 0:n.data;return(i==null||typeof i===C&&Object.keys(i).length===0)&&(i=R),s(u,"flattenResponse")&&(n.data=ie(i)),n instanceof Response?{body:n.body,bodyUsed:n.bodyUsed,ok:n.ok,redirected:n.redirected,type:n.type,url:n.url,status:n.status,statusText:n.statusText,blob:()=>n.blob(),json:()=>n.json(),text:()=>n.text(),clone:()=>n.clone(),arrayBuffer:()=>n.arrayBuffer(),formData:()=>n.formData(),bytes:()=>n.bytes(),error:c,data:i,headers:be(n.headers),config:u}:n};return{getInstance:g,buildConfig:P,config:a,request:V}}function ve(e){let t=e.endpoints,a=K(e);function r(){return a.getInstance()}function s(g){return console.error(`Add ${g} to 'endpoints'.`),Promise.resolve(null)}async function p(g,f={}){let o=t[g]||{url:String(g)},P=o.url;if(P.startsWith("//"))throw new Error("Protocol-relative URLs are not allowed.");return P.includes("://")?await ce(P,f):await a.request(P,{...o,...f})}let m={config:e,endpoints:t,requestHandler:a,getInstance:r,request:p};return new Proxy(m,{get(g,f){return f in m?m[f]:t[f]?m.request.bind(null,f):s.bind(null,f)}})}async function ce(e,t={}){return K(t).request(e,t)}return Le(Je);})();
//# sourceMappingURL=index.global.js.map