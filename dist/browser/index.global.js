"use strict";var fetchff=(()=>{var _=Object.defineProperty;var Oe=Object.getOwnPropertyDescriptor;var Be=Object.getOwnPropertyNames;var Fe=Object.prototype.hasOwnProperty;var Ie=(e,t,a)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Ae=(e,t)=>{for(var a in t)_(e,a,{get:t[a],enumerable:!0})},He=(e,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Be(t))!Fe.call(e,r)&&r!==a&&_(e,r,{get:()=>t[r],enumerable:!(n=Oe(t,r))||n.enumerable});return e};var Qe=e=>He(_({},"__esModule",{value:!0}),e);var w=(e,t,a)=>Ie(e,typeof t!="symbol"?t+"":t,a);var ke={};Ae(ke,{createApiFetcher:()=>Ne,fetchf:()=>Se});async function C(e,t){if(t){if(typeof t=="function"){let a=await t(e);a&&Object.assign(e,a)}else if(Array.isArray(t))for(let a of t){let n=await a(e);n&&Object.assign(e,n)}}}var M=class extends Error{constructor(a,n,r){super(a);w(this,"status");w(this,"statusText");w(this,"request");w(this,"config");w(this,"response");this.name="FetchError",this.message=a,this.status=(r==null?void 0:r.status)||0,this.statusText=(r==null?void 0:r.statusText)||"",this.request=n,this.config=n,this.response=r}};var L=class extends M{constructor(t,a,n){super(t,a,n),this.name="ResponseError"}};var j="application/",H=j+"json",le="charset=utf-8",b="Content-Type",T="undefined",E="object",v="string",J="AbortError",ce="TimeoutError",fe="CanceledError",Q="GET",de="HEAD";function ee(e){return e instanceof URLSearchParams}function Re(e){let t="";for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t+=a+":"+e[a]);return t}function te(e){let t={},a=Object.keys(e);a.sort();for(let n=0,r=a.length;n<r;n++){let R=a[n];t[R]=e[R]}return t}function pe(e,t){return t?e.includes("?")?`${e}&${t}`:`${e}?${t}`:e}function me(e,t){if(!t)return e;if(ee(t)){let f=t.toString();return pe(e,f)}let a=[],n=encodeURIComponent,r=(f,o)=>{o=typeof o=="function"?o():o,o=o===null||o===void 0?"":o,a[a.length]=n(f)+"="+n(o)},R=(f,o)=>{let d,D,m;if(f)if(Array.isArray(o))for(d=0,D=o.length;d<D;d++)R(f+"["+(typeof o[d]===E&&o[d]?d:"")+"]",o[d]);else if(typeof o===E&&o!==null)for(m in o)R(f+"["+m+"]",o[m]);else r(f,o);else if(Array.isArray(o))for(d=0,D=o.length;d<D;d++)r(o[d].name,o[d].value);else for(m in o)R(m,o[m]);return a},P=R("",t).join("&").replace(/%5B%5D/g,"[]");return pe(e,P)}function ye(e,t){return t?e.replace(/:\w+/g,a=>{let n=a.substring(1);return t[n]?String(t[n]):a}):e}function Pe(e){let t=typeof e;if(t===T||e===null)return!1;if(t===v||t==="number"||t==="boolean"||Array.isArray(e))return!0;if(typeof globalThis!==T&&typeof globalThis.Buffer!==T&&globalThis.Buffer.isBuffer(e)||e instanceof Date)return!1;if(t===E){let a=Object.getPrototypeOf(e);if(a===Object.prototype||a===null||typeof e.toJSON=="function")return!0}return!1}async function ae(e){return new Promise(t=>setTimeout(()=>t(!0),e))}function se(e){return e&&typeof e===E&&typeof e.data!==T&&Object.keys(e).length===1?se(e.data):e}function he(e){if(!e)return{};let t={};if(e instanceof Headers)e.forEach((a,n)=>{t[n]=a});else if(typeof e===E&&e!==null)for(let[a,n]of Object.entries(e))t[a.toLowerCase()]=n;return t}var U=new Map;async function De(e,t,a=0,n=!1,r=!0){let R=Date.now(),h=U.get(e);if(h){let o=h[3],d=h[0],D=h[1];if(!o&&R-h[2]<a)return d;o&&d.abort(new DOMException("Aborted due to new request",J)),D!==null&&clearTimeout(D),U.delete(e)}let P=new AbortController,f=r?setTimeout(()=>{let o=new DOMException(`${e.url} aborted due to timeout`,ce);$(e,o)},t):null;return U.set(e,[P,f,R,n]),P}async function $(e,t=null){let a=U.get(e);if(a){let n=a[0],r=a[1];t&&!n.signal.aborted&&n.abort(t),r!==null&&clearTimeout(r),U.delete(e)}}async function ge(e){var n;if(!(e!=null&&e.body))return null;let t=String(((n=e.headers)==null?void 0:n.get(b))||"").split(";")[0],a;try{if(t.includes(H)||t.includes("+json"))a=await e.json();else if(t.includes("multipart/form-data"))a=await e.formData();else if(t.includes(j+"octet-stream"))a=await e.blob();else if(t.includes(j+"x-www-form-urlencoded"))a=await e.formData();else if(t.includes("text/"))a=await e.text();else try{a=await e.clone().json()}catch(r){a=await e.text()}}catch(r){a=null}return a}function G(e){let t=0;for(let a=0,n=e.length;a<n;a++){let r=e.charCodeAt(a);t=t*31+r|0}return String(t)}var ne=new Map;function Ee(e){let{url:t="",method:a=Q,headers:n={},body:r="",mode:R="cors",credentials:h="include",cache:P="default",redirect:f="follow",referrer:o="",integrity:d=""}=e;if(P==="reload")return"";let D=Re(te(n)),m="";if(r!==null)if(typeof r=="string")m=G(r);else if(r instanceof FormData)r.forEach((O,B)=>{m+=B+"="+O+"&"}),m=G(m);else if(typeof Blob!==T&&r instanceof Blob||typeof File!==T&&r instanceof File)m="BF"+r.size+r.type;else if(r instanceof ArrayBuffer||ArrayBuffer.isView(r))m="AB"+r.byteLength;else{let O=typeof r===E?te(r):String(r);m=G(JSON.stringify(O))}return a+t+R+h+P+f+o+d+D+m}function Ue(e,t){return t?Date.now()-e>t*1e3:!1}function Te(e,t){let a=ne.get(e);if(a){if(!Ue(a.timestamp,t))return a;ne.delete(e)}return null}function qe(e,t,a=!1){ne.set(e,{data:t,isLoading:a,timestamp:Date.now()})}var re={method:Q,strategy:"reject",timeout:3e4,dedupeTime:1e3,defaultResponse:null,headers:{Accept:H+", text/plain, */*","Accept-Encoding":"gzip, deflate, br"},retry:{delay:1e3,maxDelay:3e4,resetTimeout:!0,backoff:1.5,retryOn:[408,409,425,429,500,502,503,504]}};function z(e){let t={...re,...e},a=(s,u,c,p)=>{p[s]&&(u[s]={...c[s],...p[s]})};a("retry",t,re,e),a("headers",t,re,e);let n=(s,u)=>typeof s[u]!==T?s[u]:t[u],r=n(e,"fetcher"),R=(r==null?void 0:r.create(t))||null,h=()=>R,P=(s,...u)=>{let c=n(s,"logger");c!=null&&c.warn&&c.warn(...u)},f=(s,u,c)=>{if(!(!c&&["PUT","DELETE"].includes(u))){let p=H+";"+le;s instanceof Headers?s.has(b)||s.set(b,p):typeof s===E&&!Array.isArray(s)&&!s[b]&&(s[b]=p)}},o=(s,u)=>{let c=n(u,"method").toUpperCase(),p=c===Q||c===de,i=ye(s,n(u,"urlPathParams")),y=n(u,"params"),N=n(u,"body")||n(u,"data"),g;p||(g=N);let S=n(u,"headers");f(S,c,g);let k=n(u,"withCredentials")?"include":n(u,"credentials"),x=y?me(i,y):i,q=x.includes("://")?"":n(u,"baseURL")||n(u,"apiUrl");return g&&typeof g!==v&&!ee(g)&&Pe(g)&&(g=JSON.stringify(g)),{...u,credentials:k,body:g,method:c,headers:S,url:q+x}},d=async(s,u)=>{m(s)||P(u,"API ERROR",s),await C(s,u==null?void 0:u.onError),await C(s,t==null?void 0:t.onError)},D=async(s,u,c)=>{let p=m(s),i=n(c,"strategy"),y=n(c,"rejectCancelled");if(!(p&&!y)){if(i==="silent")await new Promise(()=>null);else if(i==="reject")return Promise.reject(s)}return B(u,c,s)},m=s=>s.name===J||s.name===fe,O=async(s,u=null)=>{let c=u||{},p={...t,...c};a("retry",p,t,c),a("headers",p,t,c);let i=null,y=o(s,p),{timeout:N,cancellable:g,dedupeTime:S,pollingInterval:K,shouldStopPolling:k,cacheTime:x,cacheKey:V}=p,q;if(V?q=V(y):q=Ee(y),x&&q){let A=p.cacheBuster;if(!A||!A(y)){let l=Te(q,x);if(l)return l.data}}let{retries:Y=0,delay:Ce,backoff:be,retryOn:W,shouldRetry:oe,maxDelay:xe,resetTimeout:we}=p.retry,F=0,X=0,I=Ce,ie=Y>0?Y:0;for(;F<=ie;)try{let l={signal:(await De(y,N,S,g,!!(N&&(!ie||we)))).signal,...y};if(await C(l,c==null?void 0:c.onRequest),await C(l,t==null?void 0:t.onRequest),r!==null&&R!==null?i=await R.request(l):i=await fetch(l.url,l),i instanceof Response&&(i.config=l,i.data=await ge(i),!i.ok))throw new L(`${l.url} failed! Status: ${i.status||null}`,l,i);if(await C(i,c==null?void 0:c.onResponse),await C(i,t==null?void 0:t.onResponse),$(y),K&&(!k||!k(i,X))){X++,P(l,"Polling attempt "+X+"..."),await ae(K);continue}let Z=B(i,l);if(x&&q){let ue=l.skipCache;(!ue||!ue(Z,l))&&qe(q,Z)}return Z}catch(A){let l=A;if(l.status=(l==null?void 0:l.status)||(i==null?void 0:i.status)||0,l.statusText=(l==null?void 0:l.statusText)||(i==null?void 0:i.statusText)||"",l.config=y,l.request=y,l.response=i,F===Y||!(!oe||await oe(l,F))||!(W!=null&&W.includes(l.status)))return await d(l,y),$(y),D(l,i,y);P(p,`Attempt ${F+1} failed. Retry in ${I}ms.`),await ae(I),I*=be,I=Math.min(I,xe),F++}return B(i,y)},B=(s,u,c=null)=>{let p=n(u,"defaultResponse");if(!s)return{ok:!1,error:c,data:p,headers:null,config:u};let i=s==null?void 0:s.data;return(i==null||typeof i===E&&Object.keys(i).length===0)&&(i=p),n(u,"flattenResponse")&&(s.data=se(i)),s instanceof Response?{body:s.body,bodyUsed:s.bodyUsed,formData:s.formData,ok:s.ok,redirected:s.redirected,type:s.type,url:s.url,status:s.status,statusText:s.statusText,blob:s.blob.bind(s),json:s.json.bind(s),text:s.text.bind(s),clone:s.clone.bind(s),arrayBuffer:s.arrayBuffer.bind(s),error:c,data:i,headers:he(s.headers),config:u}:s};return{getInstance:h,buildConfig:o,config:e,request:O}}function Ne(e){let t=e.endpoints,a=z(e);function n(){return a.getInstance()}function r(P){return console.error(`Add ${P} to 'endpoints'.`),Promise.resolve(null)}async function R(P,f={}){let o=t[P]||{url:P};return await a.request(o.url,{...o,...f})}let h={config:e,endpoints:t,requestHandler:a,getInstance:n,request:R};return new Proxy(h,{get(P,f){return f in h?h[f]:t[f]?h.request.bind(null,f):r.bind(null,f)}})}async function Se(e,t={}){return z(t).request(e,t)}return Qe(ke);})();
//# sourceMappingURL=index.global.js.map