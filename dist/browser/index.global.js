"use strict";var fetchff=(()=>{var I=Object.defineProperty;var Qe=Object.getOwnPropertyDescriptor;var _e=Object.getOwnPropertyNames;var Se=Object.prototype.hasOwnProperty;var Me=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ke=(e,t)=>{for(var r in t)I(e,r,{get:t[r],enumerable:!0})},Le=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of _e(t))!Se.call(e,n)&&n!==r&&I(e,n,{get:()=>t[n],enumerable:!(a=Qe(t,n))||a.enumerable});return e};var je=e=>Le(I({},"__esModule",{value:!0}),e);var T=(e,t,r)=>Me(e,typeof t!="symbol"?t+"":t,r);var Je={};ke(Je,{createApiFetcher:()=>Ie,fetchf:()=>re});async function D(e,t){if(t){if(typeof t=="function"){let r=await t(e);r&&Object.assign(e,r)}else if(Array.isArray(t))for(let r of t){let a=await r(e);a&&Object.assign(e,a)}}}var B=class extends Error{constructor(r,a,n){super(r);T(this,"status");T(this,"statusText");T(this,"request");T(this,"config");T(this,"response");this.name="FetchError",this.message=r,this.status=(n==null?void 0:n.status)||0,this.statusText=(n==null?void 0:n.statusText)||"",this.request=a,this.config=a,this.response=n}};var H=class extends B{constructor(t,r,a){super(t,r,a),this.name="ResponseError"}};var U="application/",b=U+"json",fe="charset=utf-8",C="Content-Type",g="undefined",y="object",N="string",Y="function",Q="AbortError",pe="TimeoutError",de="CanceledError",E="GET",me="HEAD";var ye=10,he=["__proto__","constructor","prototype"];function W(e){return e instanceof URLSearchParams}function _(e){return e!==null&&typeof e===y}function Pe(e){let t="";for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t+=r+":"+e[r]);return t}function X(e){if(!e||typeof e!==y||Array.isArray(e))return e;let t={...e};return he.forEach(r=>{delete t[r]}),t}function Z(e){let t={},r=Object.keys(e);r.sort();for(let a=0,n=r.length;a<n;a++){let s=r[a];he.includes(s)||(t[s]=e[s])}return t}function Re(e,t){return t?e.includes("?")?`${e}&${t}`:`${e}?${t}`:e}function ge(e,t){if(!t)return e;if(W(t)){let c=t.toString();return Re(e,c)}let r=[],a=encodeURIComponent,n=(c,o)=>{o=typeof o===Y?o():o,o=o===null||o===void 0?"":o,r[r.length]=a(c)+"="+a(o)},s=(c,o,p=0)=>{if(p>=ye)return r;let l,i,f;if(c)if(Array.isArray(o))for(l=0,i=o.length;l<i;l++)s(c+"["+(typeof o[l]===y&&o[l]?l:"")+"]",o[l],p+1);else if(_(o))for(f in o)s(c+"["+f+"]",o[f],p+1);else n(c,o);else if(Array.isArray(o))for(l=0,i=o.length;l<i;l++)n(o[l].name,o[l].value);else for(f in o)s(f,o[f],p+1);return r},m=s("",t).join("&").replace(/%5B%5D/g,"[]");return Re(e,m)}function De(e,t){if(!t||e.indexOf(":")===-1)return e;let r=t;return e.replace(/:([a-zA-Z0-9_]+)/g,(a,n)=>{if(Object.prototype.hasOwnProperty.call(r,n)){let s=r[n];if(s!=null)return encodeURIComponent(String(s))}return a})}function Ce(e){let t=typeof e;return t===g||e===null?!1:t===N||t==="number"||t==="boolean"||Array.isArray(e)?!0:typeof globalThis!==g&&typeof globalThis.Buffer!==g&&globalThis.Buffer.isBuffer(e)||e instanceof Date?!1:!!(_(e)&&(Object.getPrototypeOf(e)===Object.prototype||typeof e.toJSON===Y))}async function S(e){return new Promise(t=>setTimeout(()=>t(!0),e))}function ee(e,t=0){return t>=ye?e:e&&_(e)&&typeof e.data!==g&&Object.keys(e).length===1?ee(e.data,t+1):e}function Te(e){if(!e)return{};let t={};if(e instanceof Headers)e.forEach((r,a)=>{t[a]=r});else if(_(e))for(let[r,a]of Object.entries(e))t[r.toLowerCase()]=a;return t}var w=new Map;async function Ee(e,t,r=0,a=!1,n=!0){let s=Date.now(),d=w.get(e);if(d){let o=d[3],p=d[0],l=d[1];if(!o&&s-d[2]<r)return p;o&&p.abort(new DOMException("Aborted due to new request",Q)),l!==null&&clearTimeout(l),w.delete(e)}let m=new AbortController,c=n?setTimeout(()=>{let o=new DOMException(`${e.url} aborted due to timeout`,pe);M(e,o)},t):null;return w.set(e,[m,c,s,a]),m}async function M(e,t=null){let r=w.get(e);if(r){let a=r[0],n=r[1];t&&!a.signal.aborted&&a.abort(t),n!==null&&clearTimeout(n),w.delete(e)}}async function qe(e){var n;if(!(e!=null&&e.body))return null;let t=(n=e.headers)==null?void 0:n.get(C);t?t=t.toLowerCase().trim():t="";let r=t.split(";",1)[0],a;try{if(r.includes(b)||r.includes("+json"))a=await e.json();else if(r.includes("multipart/form-data"))a=await e.formData();else if(r.includes(U+"octet-stream"))a=await e.blob();else if(r.includes(U+"x-www-form-urlencoded"))a=await e.formData();else if(r.startsWith("text/"))a=await e.text();else try{a=await e.clone().json()}catch(s){a=await e.text()}}catch(s){a=null}return a}var k=(e,t,r=null)=>{var s;let a=(s=t.defaultResponse)!=null?s:null;if(!e)return{ok:!1,error:r,data:a,headers:null,config:t};let n=e==null?void 0:e.data;return(n==null||typeof n===y&&Object.keys(n).length===0)&&(n=a),t.flattenResponse&&(e.data=ee(n)),e instanceof Response?{body:e.body,bodyUsed:e.bodyUsed,ok:e.ok,redirected:e.redirected,type:e.type,url:e.url,status:e.status,statusText:e.statusText,blob:()=>e.blob(),json:()=>e.json(),text:()=>e.text(),clone:()=>e.clone(),arrayBuffer:()=>e.arrayBuffer(),formData:()=>e.formData(),bytes:()=>e.bytes(),error:r,data:n,headers:Te(e.headers),config:t}:e};function L(e){let t=0;for(let r=0,a=e.length;r<a;r++){let n=e.charCodeAt(r);t=t*31+n|0}return String(t)}var te=new Map;function be(e){let{url:t="",method:r=E,headers:a={},body:n="",mode:s="cors",credentials:d="include",cache:m="default",redirect:c="follow",referrer:o="",integrity:p=""}=e;if(m==="reload")return"";let l=Pe(Z(a)),i="";if(n!==null)if(typeof n=="string")i=L(n);else if(n instanceof FormData)n.forEach((f,O)=>{i+=O+"="+f+"&"}),i=L(i);else if(typeof Blob!==g&&n instanceof Blob||typeof File!==g&&n instanceof File)i="BF"+n.size+n.type;else if(n instanceof ArrayBuffer||ArrayBuffer.isView(n))i="AB"+n.byteLength;else{let f=typeof n===y?Z(n):String(n);i=L(JSON.stringify(f))}return(r+t+s+d+m+c+o+p+l+i).replace(/[^\w-_]/g,"")}function ve(e,t){return t?Date.now()-e>t*1e3:!1}function we(e,t){let r=te.get(e);if(r){if(!ve(r.timestamp,t))return r;te.delete(e)}return null}function xe(e,t,r=!1){te.set(e,{data:t,isLoading:r,timestamp:Date.now()})}var j={method:E,strategy:"reject",timeout:3e4,dedupeTime:1e3,defaultResponse:null,headers:{Accept:b+", text/plain, */*","Accept-Encoding":"gzip, deflate, br"},retry:{delay:1e3,maxDelay:3e4,resetTimeout:!0,backoff:1.5,retryOn:[408,409,425,429,500,502,503,504]}},Oe=(e,t)=>{var l,i,f;let r=((l=t.method)!=null?l:E).toUpperCase(),a=r===E||r===me,n=De(e,t.urlPathParams),s;a||(s=(i=t.body)!=null?i:t.data),$e(r,t.headers,s);let d=t.withCredentials?"include":t.credentials,m=t.params,c=m?ge(n,m):n,p=c.includes("://")?"":(f=t.baseURL)!=null?f:t.apiUrl;return s&&typeof s!==N&&!W(s)&&Ce(s)&&(s=JSON.stringify(s)),{...t,url:p+c,method:r,credentials:d,body:s}},$e=(e,t,r)=>{if(!t||!r&&["PUT","DELETE"].includes(e))return;let a=b+";"+fe;t instanceof Headers?t.has(C)||t.set(C,a):typeof t===y&&!Array.isArray(t)&&!t[C]&&(t[C]=a)},x=(e,t,r,a)=>{a[e]&&(t[e]={...r[e],...a[e]})};function Ae(e){var n;let t=(n=e==null?void 0:e.headers)==null?void 0:n["retry-after"];if(!t)return null;let r=Number(t);if(!isNaN(r)&&r>=0)return r*1e3;let a=new Date(t);if(!isNaN(a.getTime())){let s=a.getTime()-Date.now();return s>0?s:0}return null}function $(e){var d,m;let t=e?X(e):{},r={...j,...t};x("retry",r,j,t),x("headers",r,j,t);let a=(m=(d=t.fetcher)==null?void 0:d.create)==null?void 0:m.call(d,r);return{getInstance:()=>a||null,config:r,request:async(c,o=null)=>{var le;let p=o?X(o):{},l={...r,...p};x("retry",l,r,p),x("headers",l,r,p);let i=null,f=Oe(c,l),{timeout:O,cancellable:Be,dedupeTime:He,pollingInterval:ae,shouldStopPolling:ne,cacheTime:J,cacheKey:se}=l,q=null;if(J&&(q=se?se(f):be(f),q&&!((le=l.cacheBuster)==null?void 0:le.call(l,f)))){let u=we(q,J);if(u)return u.data}let{retries:A=0,delay:Ue,backoff:oe,retryOn:z,shouldRetry:F,maxDelay:ie,resetTimeout:Ne}=l.retry,h=0,G=0,R=Ue,ue=A>0?A:0;for(;h<=ue;)try{let u={signal:(await Ee(f,O,He,Be,!!(O&&(!ue||Ne)))).signal,...f};if(await D(u,p.onRequest),await D(u,r.onRequest),i=a!=null&&a.request?await a.request(u):await fetch(u.url,u),i instanceof Response&&(i.config=u,i.data=await qe(i),!i.ok))throw new H(`${u.method} to ${u.url} failed! Status: ${i.status||null}`,u,i);await D(i,p.onResponse),await D(i,r.onResponse),M(f);let P=k(i,u);if(F&&h<A&&await F(P,h)){v(l,`Attempt ${h+1} failed response data check. Retry in ${R}ms.`),await S(R),R*=oe,R=Math.min(R,ie),h++;continue}if(ae&&(!ne||!ne(P,G))){G++,v(l,"Polling attempt "+G+"..."),await S(ae);continue}return J&&q&&u.skipCache&&!u.skipCache(P,u)&&xe(q,P),P}catch(K){let u=K;u.status=(u==null?void 0:u.status)||(i==null?void 0:i.status)||0,u.statusText=(u==null?void 0:u.statusText)||(i==null?void 0:i.statusText)||"",u.config=f,u.request=f,u.response=i;let P=k(i,f,u);if(h===A||!(z!=null&&z.includes(u.status))||!F||!await F(P,h)){if(Fe(u)||v(l,"FETCH ERROR",u),await D(u,p.onError),await D(u,r.onError),M(f),!Fe(u)||l.rejectCancelled){let ce=l.strategy;if(ce==="reject")return Promise.reject(u);ce==="silent"&&await new Promise(()=>null)}return P}if(u.status===429){let V=Ae(P);V!==null&&(R=V)}v(l,`Attempt ${h+1} failed. Retry in ${R}ms.`),await S(R),R*=oe,R=Math.min(R,ie),h++}return k(i,f)}}}var Fe=e=>e.name===Q||e.name===de,v=(e,...t)=>{let r=e.logger;r&&r.warn&&r.warn(...t)};function Ie(e){let t=e.endpoints,r=$(e);function a(){return r.getInstance()}function n(m){return console.error(`Add ${m} to 'endpoints'.`),Promise.resolve(null)}async function s(m,c={}){let o=t[m]||{url:String(m)},p=o.url;if(p.startsWith("//"))throw new Error("Protocol-relative URLs are not allowed.");return p.includes("://")?await re(p,c):await r.request(p,{...o,...c})}let d={config:e,endpoints:t,requestHandler:r,getInstance:a,request:s};return new Proxy(d,{get(m,c){return c in d?d[c]:t[c]?d.request.bind(null,c):n.bind(null,c)}})}async function re(e,t={}){return $(t).request(e)}return je(Je);})();
//# sourceMappingURL=index.global.js.map