"use strict";var fetchff=(()=>{var U=Object.defineProperty;var ke=Object.getOwnPropertyDescriptor;var Le=Object.getOwnPropertyNames;var je=Object.prototype.hasOwnProperty;var ve=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $e=(e,t)=>{for(var n in t)U(e,n,{get:t[n],enumerable:!0})},Je=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Le(t))!je.call(e,a)&&a!==n&&U(e,a,{get:()=>t[a],enumerable:!(r=ke(t,a))||r.enumerable});return e};var ze=e=>Je(U({},"__esModule",{value:!0}),e);var N=(e,t,n)=>ve(e,typeof t!="symbol"?t+"":t,n);var We={};$e(We,{createApiFetcher:()=>_e,fetchf:()=>ae});async function w(e,t){if(t){if(typeof t=="function"){let n=await t(e);n&&Object.assign(e,n)}else if(Array.isArray(t))for(let n of t){let r=await n(e);r&&Object.assign(e,r)}}}var _=class extends Error{constructor(n,r,a){super(n);this.request=r;this.response=a;N(this,"status");N(this,"statusText");N(this,"config");this.name="FetchError",this.status=(a==null?void 0:a.status)||0,this.statusText=(a==null?void 0:a.statusText)||"",this.config=r}};var S=class extends _{constructor(t,n,r){super(t,n,r),this.name="ResponseError"}};var M="application/",A=M+"json",de="charset=utf-8",b="Content-Type",C="undefined",P="object",k="string",W="function",L="AbortError",Re="TimeoutError",ye="CanceledError",q="GET",Pe="HEAD";var ge=10,De=["__proto__","constructor","prototype"];function X(e){return e instanceof URLSearchParams}function j(e){return e!==null&&typeof e===P}function Ce(e){let t="";for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t+=n+":"+e[n]);return t}function Z(e){if(!e||typeof e!==P||Array.isArray(e))return e;let t={...e};return De.forEach(n=>{delete t[n]}),t}function ee(e){let t={},n=Object.keys(e);n.sort();for(let r=0,a=n.length;r<a;r++){let o=n[r];De.includes(o)||(t[o]=e[o])}return t}function he(e,t){return t?e.includes("?")?`${e}&${t}`:`${e}?${t}`:e}function Ee(e,t){if(!t)return e;if(X(t)){let c=t.toString();return he(e,c)}let n=[],r=encodeURIComponent,a=(c,u)=>{u=typeof u===W?u():u,u=u===null||u===void 0?"":u,n[n.length]=r(c)+"="+r(u)},o=(c,u,p=0)=>{if(p>=ge)return n;let i,s,f;if(c)if(Array.isArray(u))for(i=0,s=u.length;i<s;i++)o(c+"["+(typeof u[i]===P&&u[i]?i:"")+"]",u[i],p+1);else if(j(u))for(f in u)o(c+"["+f+"]",u[f],p+1);else a(c,u);else if(Array.isArray(u))for(i=0,s=u.length;i<s;i++)a(u[i].name,u[i].value);else for(f in u)o(f,u[f],p+1);return n},m=o("",t).join("&").replace(/%5B%5D/g,"[]");return he(e,m)}function Te(e,t){if(!t||e.indexOf(":")===-1)return e;let n=t;return e.replace(/:([a-zA-Z0-9_]+)/g,(r,a)=>{if(Object.prototype.hasOwnProperty.call(n,a)){let o=n[a];if(o!=null)return encodeURIComponent(String(o))}return r})}function we(e){let t=typeof e;return t===C||e===null?!1:t===k||t==="number"||t==="boolean"||Array.isArray(e)?!0:typeof globalThis!==C&&typeof globalThis.Buffer!==C&&globalThis.Buffer.isBuffer(e)||e instanceof Date?!1:!!(j(e)&&(Object.getPrototypeOf(e)===Object.prototype||typeof e.toJSON===W))}async function O(e){return new Promise(t=>setTimeout(()=>t(!0),e))}function te(e,t=0){return t>=ge?e:e&&j(e)&&typeof e.data!==C&&Object.keys(e).length===1?te(e.data,t+1):e}function be(e){if(!e)return{};let t={};if(e instanceof Headers)e.forEach((n,r)=>{t[r]=n});else if(j(e))for(let[n,r]of Object.entries(e))t[n.toLowerCase()]=r;return t}var E=new Map;async function qe(e,t,n,r=0,a=!1,o=!0){if(!e)return new AbortController;let d=Date.now(),m=E.get(e);if(m){let p=m[3],i=m[0],s=m[1];if(!p&&d-m[2]<r)return i;p&&i.abort(new DOMException("Aborted due to new request",L)),s!==null&&clearTimeout(s),E.delete(e)}let c=new AbortController,u=o?setTimeout(()=>{let p=new DOMException(`${t} aborted due to timeout`,Re);v(e,p)},n):null;return E.set(e,[c,u,d,a]),c}async function v(e,t=null){if(!e)return;let n=E.get(e);if(n){let r=n[0],a=n[1];t&&!r.signal.aborted&&r.abort(t),a!==null&&clearTimeout(a),E.delete(e)}}function Oe(e,t){let n=E.get(e);n&&(n[4]=t,E.set(e,n))}function xe(e,t){let n=E.get(e);return n&&n[4]&&Date.now()-n[2]<t?n[4]:null}async function Fe(e){var a;if(!(e!=null&&e.body))return null;let t=(a=e.headers)==null?void 0:a.get(b);t?t=t.toLowerCase().trim():t="";let n=t.split(";",1)[0],r;try{if(n.includes(A)||n.includes("+json"))r=await e.json();else if(n.includes("multipart/form-data"))r=await e.formData();else if(n.includes(M+"octet-stream"))r=await e.blob();else if(n.includes(M+"x-www-form-urlencoded"))r=await e.formData();else if(n.startsWith("text/"))r=await e.text();else try{r=await e.clone().json()}catch(o){r=await e.text()}}catch(o){r=null}return r}var $=(e,t,n=null)=>{var o;let r=(o=t.defaultResponse)!=null?o:null;if(!e)return{ok:!1,error:n,data:r,headers:null,config:t};let a=e.data;return(a==null||typeof a===P&&Object.keys(a).length===0)&&(a=r),t.flattenResponse&&(e.data=te(a)),e instanceof Response?{body:e.body,bodyUsed:e.bodyUsed,ok:e.ok,redirected:e.redirected,type:e.type,url:e.url,status:e.status,statusText:e.statusText,blob:()=>e.blob(),json:()=>e.json(),text:()=>e.text(),clone:()=>e.clone(),arrayBuffer:()=>e.arrayBuffer(),formData:()=>e.formData(),bytes:()=>e.bytes(),error:n,data:a,headers:be(e.headers),config:t}:e};function I(e){let t=0;for(let n=0,r=e.length;n<r;n++){let a=e.charCodeAt(n);t=t*31+a|0}return String(t)}var ne=new Map,J="|",z=64;function Ae(e){let{url:t="",method:n=q,headers:r=null,body:a=void 0,mode:o="cors",credentials:d="same-origin",cache:m="default",redirect:c="follow",referrer:u="about:client",integrity:p=""}=e;if(m==="reload")return"";let i="";if(r){let f=r instanceof Headers?Object.fromEntries(r.entries()):r;i=Ce(ee(f)),i.length>z&&(i=I(i))}let s="";if(a)if(typeof a=="string")s=a.length<z?a:I(a);else if(a instanceof FormData)a.forEach((f,x)=>{s+=x+"="+f+"&"}),s.length>z&&(s=I(s));else if(typeof Blob!==C&&a instanceof Blob||typeof File!==C&&a instanceof File)s="BF"+a.size+a.type;else if(a instanceof ArrayBuffer||ArrayBuffer.isView(a))s="AB"+a.byteLength;else{let f=typeof a===P?JSON.stringify(ee(a)):String(a);s=f.length>z?I(f):f}return(n+J+t+J+o+d+m+c+u+p+J+i+J+s).replace(/[^\w\-_|]/g,"")}function Ge(e,t){return t?Date.now()-e>t*1e3:!1}function Ke(e,t){let n=ne.get(e);if(n){if(!Ge(n.timestamp,t))return n;Ve(e)}return null}function Ie(e,t,n=!1){ne.set(e,{data:t,isLoading:n,timestamp:Date.now()})}function Ve(e){ne.delete(e)}function He(e,t,n,r){if(!t||!e||n!=null&&n(r))return null;let a=Ke(e,t);return a?a.data:null}var G={method:q,strategy:"reject",timeout:3e4,dedupeTime:0,defaultResponse:null,headers:{Accept:A+", text/plain, */*","Accept-Encoding":"gzip, deflate, br"},retry:{delay:1e3,maxDelay:3e4,resetTimeout:!0,backoff:1.5,retryOn:[408,409,425,429,500,502,503,504]}},Be=(e,t)=>{var i,s,f;let n=((i=t.method)!=null?i:q).toUpperCase(),r=n===q||n===Pe,a=Te(e,t.urlPathParams),o;r||(o=(s=t.body)!=null?s:t.data),Ye(n,t.headers,o);let d=t.withCredentials?"include":t.credentials,m=t.params,c=m?Ee(a,m):a,p=c.includes("://")?"":(f=t.baseURL)!=null?f:t.apiUrl;return o&&typeof o!==k&&!X(o)&&we(o)&&(o=JSON.stringify(o)),{...t,url:p+c,method:n,credentials:d,body:o}},Ye=(e,t,n)=>{if(!t||!n&&["PUT","DELETE"].includes(e))return;let r=A+";"+de;t instanceof Headers?t.has(b)||t.set(b,r):typeof t===P&&!Array.isArray(t)&&!t[b]&&(t[b]=r)},T=(e,t,n,r)=>{r[e]&&(t[e]={...n[e],...r[e]})};function Qe(e){var a;let t=(a=e==null?void 0:e.headers)==null?void 0:a["retry-after"];if(!t)return null;let n=Number(t);if(!isNaN(n)&&n>=0)return n*1e3;let r=new Date(t);if(!isNaN(r.getTime())){let o=r.getTime()-Date.now();return o>0?o:0}return null}async function Ue(e,t,n,r=0,a=0){let o=0,d;for(;(r===0||o<r)&&(a>0&&await O(a),d=await e(),o++,!(r>0&&o>=r||!t||n&&n(d,o)));)await O(t);return d}function K(e){var d,m;let t=e?Z(e):{},n={...G,...t};T("retry",n,G,t),T("headers",n,G,t);let r=(m=(d=t.fetcher)==null?void 0:d.create)==null?void 0:m.call(d,n);return{getInstance:()=>r||null,config:n,request:async(c,u=null)=>{let p=u?Z(u):{},i={...n,...p};T("retry",i,n,p),T("headers",i,n,p);let s=null,f=Be(c,i),{timeout:x,cancellable:se,dedupeTime:F,cacheTime:H,cacheKey:oe,pollingInterval:ie=0}=i,y=null;if((H||F||se||x)&&(y=oe?oe(f):Ae(f)),H){let g=He(y,H,i.cacheBuster,f);if(g)return g}if(y&&F){let g=xe(y,F);if(g)return await g}let ue=async()=>{let{retries:g=0,delay:Se,backoff:ce,retryOn:V,shouldRetry:B,maxDelay:fe,resetTimeout:Me}=i.retry,h=0,R=Se||0,Q=g>0?g:0;for(;h<=Q;)try{let l={signal:(await qe(y,f.url,x,F,se,!!(x&&(!Q||Me)))).signal,...f};if(await w(l,p.onRequest),await w(l,n.onRequest),s=r!=null&&r.request?await r.request(l):await fetch(l.url,l),s instanceof Response&&(s.config=l,s.data=await Fe(s),!s.ok))throw new S(`${l.method} to ${l.url} failed! Status: ${s.status||null}`,l,s);await w(s,p.onResponse),await w(s,n.onResponse),v(y);let D=$(s,l);if(B&&h<Q&&await B(D,h)){re(i,`Attempt ${h+1} failed response data check. Retry in ${R}ms.`),await O(R),R*=ce||1,R=Math.min(R,fe||R),h++;continue}return H&&y&&(!l.skipCache||!l.skipCache(D,l))&&Ie(y,D),D}catch(pe){let l=pe;l.status=(l==null?void 0:l.status)||(s==null?void 0:s.status)||0,l.statusText=(l==null?void 0:l.statusText)||(s==null?void 0:s.statusText)||"",l.config=f,l.request=f,l.response=s;let D=$(s,f,l);if(h===Q||!(V!=null&&V.includes(l.status))||!B||!await B(D,h)){if(Ne(l)||re(i,"FETCH ERROR",l),await w(l,p.onError),await w(l,n.onError),v(y),!Ne(l)||i.rejectCancelled){let me=i.strategy;if(me==="reject")return Promise.reject(l);me==="silent"&&await new Promise(()=>null)}return D}if(l.status===429){let Y=Qe(D);Y!==null&&(R=Y)}re(i,`Attempt ${h+1} failed. Retry in ${R}ms.`),await O(R),R*=ce||1,R=Math.min(R,fe||R),h++}return $(s,f)},le=ie>0?Ue(ue,ie,i.shouldStopPolling,i.maxPollingAttempts,i.pollingDelay):ue();return y&&F&&Oe(y,le),le}}}var Ne=e=>e.name===L||e.name===ye,re=(e,...t)=>{let n=e.logger;n&&n.warn&&n.warn(...t)};function _e(e){let t=e.endpoints,n=K(e);function r(){return n.getInstance()}function a(m){return console.error(`Add ${m} to 'endpoints'.`),Promise.resolve(null)}async function o(m,c={}){let u=t[m]||{url:String(m)},p=u.url;if(p.startsWith("//"))throw new Error("Protocol-relative URLs are not allowed.");if(p.includes("://"))return await ae(p,c);let s={...u,...c};return T("retry",s,u,c),T("headers",s,u,c),await n.request(p,s)}let d={config:e,endpoints:t,requestHandler:n,getInstance:r,request:o};return new Proxy(d,{get(m,c){return c in d?d[c]:t[c]?d.request.bind(null,c):a.bind(null,c)}})}async function ae(e,t={}){return K(t).request(e)}return ze(We);})();
//# sourceMappingURL=index.global.js.map